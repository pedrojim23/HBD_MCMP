<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Carolina ❤️</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --c-red: #ff0080;
            --c-yellow: #ffd700;
            --c-green: #00ffea;
            --c-blue: #00aeff;
        }

        body {
            margin: 0; padding: 0;
            background: radial-gradient(circle at center, #0a0a0a 0%, #000000 100%);
            height: 100vh;
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
            color: white;
        }

        /* Lienzo para confeti (siempre visible de fondo) */
        #confetti-canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1;
        }

        /* --- PANTALLAS --- */
        .screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease, transform 1s ease;
            z-index: 10;
        }

        /* Pantalla 2 (Carta) oculta al inicio */
        #screen2 {
            opacity: 0;
            pointer-events: none;
            transform: scale(0.95);
        }

        /* Clases de utilidad para transiciones */
        .fade-out {
            opacity: 0 !important;
            pointer-events: none !important;
            transform: scale(1.1) !important;
        }
        
        .fade-in {
            opacity: 1 !important;
            pointer-events: auto !important;
            transform: scale(1) !important;
        }

        /* Ocultar elementos específicos (como el texto de instrucción) */
        .hidden {
            opacity: 0 !important;
            pointer-events: none;
            animation: none !important; /* Detener parpadeo */
            transition: opacity 0.5s ease;
        }

        /* --- ELEMENTOS DE PANTALLA 1 --- */
        .heart-container {
            position: relative;
            width: 75vmin; height: 75vmin;
            max-width: 450px; max-height: 450px;
            cursor: pointer;
            animation: float 4s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-15px) scale(1.02); }
        }

        svg { width: 100%; height: 100%; overflow: visible; }
        path#heart-wire { fill: none; stroke: #222; stroke-width: 1px; stroke-linecap: round; }

        .light {
            position: absolute; width: 8px; height: 8px; border-radius: 50%;
            transform: translate(-50%, -50%); background-color: #222;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .light.on {
            width: 12px; height: 12px;
            box-shadow: 0 0 10px currentColor, 0 0 30px currentColor, 0 0 60px currentColor;
            animation: twinkle 2s infinite alternate;
        }
        @keyframes twinkle {
            0% { opacity: 0.8; transform: translate(-50%, -50%) scale(0.9); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
        }

        .content-wrap {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); text-align: center; width: 100%;
            pointer-events: none; /* Dejar pasar clic al corazón */
        }
        
        .click-hint {
            font-size: 0.9rem; letter-spacing: 3px; text-transform: uppercase;
            color: #888; margin-bottom: 20px; animation: pulseText 2s infinite;
        }
        @keyframes pulseText { 0%, 100% { opacity: 0.5;} 50% { opacity: 1;}}

        .main-title {
            font-family: 'Dancing Script', cursive; font-size: 3.5rem; margin: 0;
            text-shadow: 0 4px 15px rgba(0,0,0,0.8);
            opacity: 0; transform: translateY(30px); transition: all 1.2s ease-out;
        }
        .shimmer-text {
            display: inline-block;
            background: linear-gradient(to right, #fff 20%, #ffd700 40%, #fff 60%, #fff 100%);
            background-size: 200% auto; color: #000;
            background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }
        @keyframes shimmer { to { background-position: 200% center; } }
        
        .sub-msg {
            font-size: 1rem; margin-top: 15px; opacity: 0; color: #ddd;
            transform: translateY(30px); transition: all 1.2s ease-out 0.6s;
        }

        /* Botón NEXT */
        .next-btn {
            margin-top: 40px;
            padding: 12px 30px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 30px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            opacity: 0;
            pointer-events: auto; /* IMPORTANTE: Habilitar clic */
            transition: all 0.5s ease;
            box-shadow: 0 0 10px rgba(255,255,255,0.1);
        }
        .next-btn:hover {
            background: rgba(255,255,255,0.1);
            border-color: #fff;
            box-shadow: 0 0 20px rgba(255,255,255,0.3);
        }
        .visible { opacity: 1 !important; transform: translateY(0) !important; }

        /* --- ELEMENTOS DE PANTALLA 2 (CARTA) --- */
        .letter-container {
            width: 85%; max-width: 600px; max-height: 80vh;
            background: rgba(20, 20, 20, 0.9);
            border: 2px solid #ffd700;
            border-radius: 15px; padding: 40px;
            text-align: center;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.2);
            overflow-y: auto;
            position: relative;
        }
        .corner-deco {
            position: absolute; width: 40px; height: 40px;
            border-top: 3px solid #ffd700; border-left: 3px solid #ffd700;
            top: 15px; left: 15px;
        }
        .corner-deco.bottom {
            top: auto; left: auto; bottom: 15px; right: 15px;
            transform: rotate(180deg);
        }
        .letter-title {
            font-family: 'Dancing Script', cursive; font-size: 2.5rem; color: #ffd700; margin-bottom: 20px;
        }
        .letter-body {
            font-size: 1.1rem; line-height: 1.8; color: #e0e0e0; white-space: pre-wrap;
        }

        @media (max-width: 600px) {
            .main-title { font-size: 2.8rem; }
            .heart-container { width: 90vmin; height: 90vmin; }
            .letter-container { padding: 25px; width: 90%; }
            .letter-title { font-size: 2rem; }
            .letter-body { font-size: 1rem; }
        }
    </style>
</head>
<body>

    <audio id="bgMusic" src="./Celeste.mp3" preload="auto" loop></audio>

    <canvas id="confetti-canvas"></canvas>

    <div id="screen1" class="screen">
        <div class="heart-container" id="heartContainer">
            <svg viewBox="0 0 100 100">
                <path id="heart-wire" d="M50 90 Q100 45 100 25 A25 25 0 0 0 50 25 A25 25 0 0 0 0 25 Q0 45 50 90" />
            </svg>
        </div>

        <div class="content-wrap">
            <div id="introText" class="click-hint">Toca para encender la magia</div>
            
            <h1 id="nameTitle" class="main-title">¡Feliz Cumpleaños<br><span class="shimmer-text">Carolina!</span></h1>
            <p id="romanceText" class="sub-msg">
                La distancia solo nos impide tocarnos,<br>pero no sentirnos.<br>
                Te quiero ❤️
            </p>
            
            <button id="nextBtn" class="next-btn">Leer Carta Especial &rarr;</button>
        </div>
    </div>

    <div id="screen2" class="screen">
        <div class="letter-container">
            <div class="corner-deco"></div>
            <div class="corner-deco bottom"></div>
            
            <h2 class="letter-title">Para ti, Carolina...</h2>
            
            <div class="letter-body">
Martha Carolina Moreno Prado,
                
Carito, cariño,mi vida, mi niña, mi amor, mi cielo, mi corazón...
                
Sé que tu cumpleaños no es precisamente tú día favorito, así que esto no es tanto por la fecha, sino por la persona(tú). Y pues, es un buen pretexto para escribite...
                
Te deseo un cumpleaños tranquilo, sin ruido, sin tanto rollo, a tu manera. Quiero que sepas que estoy profundamente orgulloso de ti. De todo lo que haces, de lo que persigues y de lo que has tenido que pasar para seguir siendo quien eres. No cualquiera carga con su historia con la fortaleza y coraje que usted tiene, y eso es una de las muchas cosas que te admiro.
                
Hay algo en ti que se queda. Tu forma de ver las cosas, tu carácter, incluso esos silencios que dicen más de lo que parece. Me encanta quién eres y me gusta cómo sigues avanzando, incluso cuando el camino se pone complicado.

No escribo esto para incomodarla, ni para ponerle peso al momento, sino para ser honesto. Nace desde el cariño, un cariño real, uno que nace desde el respeto, la admiración y algo más que, con el tiempo, ha ido creciendo de forma natural.

Que hoy, aunque no te encante la fecha, sepas que hay alguien que te piensa bonito, que te elige en sus pensamientos y que desea seguir conociéndote.

Feliz cumpleaños, Carolina.
Con amor y cariño✨ 
Pedro Jiménez.
                
</div>
        </div>
    </div>

    <script>
        const totalLights = 55;
        const container = document.getElementById('heartContainer');
        const wire = document.getElementById('heart-wire');
        const colors = ['#ff0055', '#ffdd00', '#00ffaa', '#0099ff', '#ff33aa'];
        const bgMusic = document.getElementById('bgMusic');
        
        const introText = document.getElementById('introText');
        const nameTitle = document.getElementById('nameTitle');
        const romanceText = document.getElementById('romanceText');
        const nextBtn = document.getElementById('nextBtn');
        
        const screen1 = document.getElementById('screen1');
        const screen2 = document.getElementById('screen2');

        let isOn = false;

        // Crear luces
        function createLights() {
            const pathLength = wire.getTotalLength();
            for (let i = 0; i < totalLights; i++) {
                const bulb = document.createElement('div');
                bulb.classList.add('light');
                bulb.style.color = colors[Math.floor(Math.random() * colors.length)];
                const distance = (pathLength / totalLights) * i; 
                const point = wire.getPointAtLength(distance);
                bulb.style.left = point.x + '%';
                bulb.style.top = point.y + '%';
                bulb.style.transitionDelay = (i * 0.02) + 's';
                bulb.style.animationDelay = (Math.random() * 2) + 's';
                container.appendChild(bulb);
            }
        }
        createLights();

        // --- INTERACCIÓN 1: TOCAR CORAZÓN ---
        container.addEventListener('click', () => {
            if (isOn) return;
            isOn = true;

            // Audio
            bgMusic.volume = 0.5;
            bgMusic.play().catch(e => console.log("Audio play error"));

            // 1. AQUÍ ESTÁ LA MAGIA: OCULTAR TEXTO INICIAL
            introText.classList.add('hidden');

            // Encender luces
            const lights = document.querySelectorAll('.light');
            lights.forEach(l => {
                l.classList.add('on');
                l.style.backgroundColor = l.style.color; 
            });

            // Mostrar mensaje cumple
            nameTitle.classList.add('visible');
            romanceText.classList.add('visible');
            fireConfetti();

            // Mostrar botón 'Siguiente' tras 4 segundos
            setTimeout(() => {
                nextBtn.classList.add('visible');
            }, 4000);
        });

        // --- INTERACCIÓN 2: IR A CARTA ---
        nextBtn.addEventListener('click', () => {
            // FADE OUT de la pantalla 1 (Se va todo el texto de cumple)
            screen1.classList.add('fade-out');
            
            // FADE IN de la pantalla 2 (Aparece la carta)
            setTimeout(() => {
                screen2.classList.add('fade-in');
                fireConfetti(); // Más confeti para celebrar
            }, 800);
        });

        // Lógica Confeti
        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const pieces = [];
            const numberOfPieces = 200;
            const partyColors = ['#ff0055', '#ffdd00', '#00ffaa', '#0099ff', '#ffffff', '#ffcc00'];

            function update() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                pieces.forEach((p, index) => {
                    p.y += p.gravity; p.rotation += p.rotationSpeed;
                    ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rotation);
                    ctx.fillStyle = p.color;
                    ctx.shadowBlur = 5; ctx.shadowColor = p.color;
                    ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                    ctx.restore();
                    if (p.y > canvas.height) pieces.splice(index, 1);
                });
                if (pieces.length > 0) requestAnimationFrame(update);
            }

            for (let i = 0; i < numberOfPieces; i++) {
                pieces.push({
                    x: Math.random() * canvas.width, y: Math.random() * -200,
                    size: Math.random() * 8 + 4, gravity: Math.random() * 3 + 2,
                    rotation: Math.random() * 360, rotationSpeed: (Math.random() - 0.5) * 0.3,
                    color: partyColors[Math.floor(Math.random() * partyColors.length)]
                });
            }
            update();
        }
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti-canvas');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        });
    </script>
</body>

</html>
